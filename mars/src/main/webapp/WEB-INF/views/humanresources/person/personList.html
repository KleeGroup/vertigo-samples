<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
  xmlns:vu="http://www.morphbit.com/thymeleaf/component"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{templates/mmcListLayout}"
>
	<head>
		<title>Persons</title>
	</head>
	
	<body>
		<section layout:fragment="content" >
		<div class="row justify-end">
			<vu:form>
				<vu:button-submit icon="fas fa-grip-horizontal" action="@{_changeRenderer?renderer=cards}" th::flat="${model.listRenderer != 'cards'}"/>
				<vu:button-submit icon="fas fa-table" action="@{_changeRenderer?renderer=table}" th::flat="${model.listRenderer != 'table'}" />
				<vu:button-submit icon="fas fa-list" action="@{_changeRenderer?renderer=list}" th::flat="${model.listRenderer != 'list'}" />
			</vu:form>
		</div>
		<q-btn label="Add" type="a" color="primary" th:href="@{/humanresources/person/}"></q-btn>
		<th:block th:if="${model.listRenderer == 'table'}">
			<vu:table list="persons" componentId="personsTable" sortUrl="@{/humanresources/persons/_sort}">
				<vu:column field="personId" />
				<vu:column field="firstName" sortable="true" />
				<vu:column field="lastName" sortable="true" />
				<vu:column field="email" sortable="true" />
				<vu:column name="actions" label="Actions" sortable="true" >
					<q-btn round color="primary" icon="arrow_forward" type="a" th::href="|'@{/humanresources/person/}'+props.row.personId|"></q-btn>
				</vu:column>
			</vu:table>
		</th:block>
		<th:block th:if="${model.listRenderer == 'cards'}">
			<vu:include-data object="persons" field="personId" />
			<vu:include-data object="persons" field="firstName" />
			<vu:include-data object="persons" field="lastName" />
			<vu:include-data object="persons" field="email" />
			<div class="row wrap persons justify-between gutter-md">
				<div class="personCard col-xl-4 col-md-6 col-xs-12 " v-for="person in vueData.persons">
					<q-card inline color="white" :key="person.personId">
						<q-card-media >
							<img th:src="@{/static/img/persons/Person10.jpg}"  />
						</q-card-media>
						<q-card-title>
							<a class="text-primary" th::href="|'@{/humanresources/person/}'+person.personId|">{{person.firstName}} {{person.lastName}}</a>
							<span slot="subtitle">{{person.email}}</span>
						</q-card-title>
						<q-card-main>
						a
						</q-card-main>
						<q-card-separator></q-card-separator>
						b
					</q-card>
				</div>
			</div>
		</th:block>
		<th:block th:if="${model.listRenderer == 'list'}">
			<vu:list list="persons" componentId="personsList" sortUrl="@{/humanresources/persons/_sort}" rowsPerPage="5" showMoreLabel="Show more">
				<q-item-side>
					<img th:src="@{/static/img/persons/Person10.jpg}" class="avatar"  />
				</q-item-side>
				<q-item-main>
					<div class="row">
						<div class="col-6">
							<vu:field-read field="personId" list="persons" listKey="personId" listDisplay="firstName" />
						</div>
						<div class="col-6">
							<vu:include-data object="persons" field="lastName" />
							<vu:include-data object="persons" field="email_fmt" />
							{{item.lastName}}
							{{item.email_fmt}}
						</div>
					</div>
				</q-item-main>
				<q-item-side>
					<q-btn round color="primary" icon="arrow_forward" type="a" th::href="|'@{/humanresources/person/}'+item.personId|"></q-btn>
				</q-item-side>
			</vu:list>
		</th:block>
		</section>
	</body>
</html>