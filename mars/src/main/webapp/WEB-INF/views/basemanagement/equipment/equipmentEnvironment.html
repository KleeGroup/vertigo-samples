<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
  xmlns:vu="http://www.morphbit.com/thymeleaf/component"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{templates/mmcDetailLayout}"
>
	<head>
		<title>Equipment Environment</title>
		
		<!-- graphs -->
		<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.bundle.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-color/1.0.3/d3-color.min.js" ></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-interpolate/1.1.5/d3-interpolate.min.js" ></script>
		<script th:src="@{/dashboard/static/dashboard.js}"></script>
		<script th:src="@{/dashboard/static/dashboard.chartjs.js}"></script>
	</head>
	
	<body>
		
		<section>
				<div layout:fragment="content-header-left">
					<img th:src="@{/static/img/bases/Mars base 1.jpg}" class="detailImg gt-md"/>
				</div>
				<div layout:fragment="content-header-title">
					<span class="text-bigger" th:text="${model.equipment.code}"></span>
					<br/><span class="text-smaller" th:text="${model.equipment.name}"></span>
				</div>
				<div th:if="${!model.modeCreate}" layout:fragment="content-header-tabs">
					<q-btn flat type="a" th:href="@{/basemanagement/equipment/} + ${model.equipment.equipmentId}">Informations</q-btn>
					<q-btn flat type="a" th:href="@{/basemanagement/equipment/maintenance/} + ${model.equipment.equipmentId}">Maintenance</q-btn>
					<q-btn flat type="a" class="active" th:href="@{/basemanagement/equipment/environment/} + ${model.equipment.equipmentId}">Environment</q-btn>
				</div>
		</section>
		
		<section layout:fragment="content"  th:switch="${model.equipmentType.label}">

		<div class="row gutter-md"  th:case="'Mining Area'">
		
<!-- 		   <span th:text="${model.equipment.equipmentTypeId}"></span> -->

			<vu:block  title="List of equipment sensors" >
			<q-list link style="height:100%">
			        <q-item tag="a" href="#temperature">Temperature Sensor</q-item>
			        <q-item tag="a" href="#humidity">Humidity Sensor</q-item>
			        <q-item tag="a" href="#geiger">Geiger Sensor</q-item>
	        </q-list>
			</vu:block>
			
			<vu:block title="Data Overview">
							<vu:grid cols="1">
		<q-card class="bg-white text-center" >

	<q-card-title class="indicator-title text-faded">Sensors connected to <span th:text="${model.equipment.name}"></span></q-card-title>
		<q-card-main>
			<q-knob
				th::value="3"
				:min="0"
				:max="0"
				:decimals="1"
				color="black"
				:readonly="true" style="font-size: 1.5rem">
			</q-knob>
		</q-card-main>
		</q-card>
			<q-card class="bg-white text-center" >

	<q-card-title class="indicator-title text-faded">Amount of data collected:</q-card-title>
		<q-card-main>
			<q-knob
				th::value="${model.TemperatureTotalMeasured}"
				:min="0"
				:max="0"
				:decimals="1"
				color="blue"
				:readonly="true" style="font-size: 1.5rem">
			</q-knob>
		</q-card-main>
		</q-card>
					<q-card class="bg-white text-center" >

	<q-card-title class="indicator-title text-faded">Actuators connected</q-card-title>
		<q-card-main>
			<q-knob
				th::value="1"
				:min="0"
				:max="0"
				:decimals="1"
				color="green"
				:readonly="true" style="font-size: 1.5rem">
			</q-knob>
		</q-card-main>
		</q-card>
			</vu:grid>
			</vu:block>
			
			<vu:block title="Temperature sensor" id=temperature>

				
				<div class="col-md-6 col-xs-12" >
					<div class="chart chartjs linechart bg-white" 
							    th:data-url="@{/api/basemanagment/equipment/environment/data/series}" 
							    data-query-measures='["value:MAX"]'
							    data-query-data-filter='{ "measurement": "temperature", "filters": {"equipment": "ms01"}}'
							    data-query-time-filter='{ "from": "now() - 3d", "to": "now()", "dim": "1h"}'
								data-labels='{"value:mean":"Temperature mean values"}' 
							    data-colors='iANDROID:LIGHT'></div> 
							    </div>
			</vu:block>
							    
			<vu:block title="Humidity Sensor" id="humidity">
				<div class="col-md-6 col-xs-12" >
					<div class="chart chartjs linechart bg-white" 
							    th:data-url="@{/api/basemanagment/equipment/environment/data/series}" 
							    data-query-measures='["value:mean"]'
							    data-query-data-filter='{ "measurement": "humidite", "filters": {"equipment": "ms01"}}'
							    data-query-time-filter='{ "from": "now() - 3d", "to": "now()", "dim": "1h"}'
								data-labels='{"value:mean":"Temperature mean values"}' 
							    data-colors='iANDROID'></div> 
				</div>

</vu:block>		
			<vu:block title="Geiger Sensor" id="geiger">
				<div class="col-md-6 col-xs-12" >
					<div class="chart chartjs linechart bg-white" 
							    th:data-url="@{/api/basemanagment/equipment/environment/data/series}" 
							    data-query-measures='["value:mean"]'
							    data-query-data-filter='{ "measurement": "geiger", "filters": {"equipment": "ms01"}}'
							    data-query-time-filter='{ "from": "now() - 3d", "to": "now()", "dim": "1h"}'
								data-labels='{"value:mean":"geiger value"}' 
							    data-colors='iANDROID'></div> 
				</div>
</vu:block>	 
</div>
		<div class="row gutter-md"  th:case="'Farming Area'">
		
<!-- 		   <span th:text="${model.equipment.equipmentTypeId}"></span> -->

			<vu:block  title="List of equipment sensors" >
			<q-list link style="height:100%">
			        <q-item tag="a" href="#temperature">Temperature Sensor</q-item>
			        <q-item tag="a" href="#humidity">Humidity Sensor</q-item>
			        <q-item tag="a" href="#moisture">Soil Moisture Sensor</q-item>
	        </q-list>
			</vu:block>
			
			<vu:block title="Data Overview">
							<vu:grid cols="1">
		<q-card class="bg-white text-center" >

	<q-card-title class="indicator-title text-faded">Sensors connected to <span th:text="${model.equipment.name}"></span></q-card-title>
		<q-card-main>
			<q-knob
				th::value="3"
				:min="0"
				:max="0"
				:decimals="1"
				color="black"
				:readonly="true" style="font-size: 1.5rem">
			</q-knob>
		</q-card-main>
		</q-card>
			<q-card class="bg-white text-center" >

	<q-card-title class="indicator-title text-faded">Amount of data collected:</q-card-title>
		<q-card-main>
			<q-knob
				th::value="${model.TemperatureTotalMeasured}"
				:min="0"
				:max="0"
				:decimals="1"
				color="blue"
				:readonly="true" style="font-size: 1.5rem">
			</q-knob>
		</q-card-main>
		</q-card>
					<q-card class="bg-white text-center" >

	<q-card-title class="indicator-title text-faded">Actuators connected</q-card-title>
		<q-card-main>
			<q-knob
				th::value="1"
				:min="0"
				:max="0"
				:decimals="1"
				color="green"
				:readonly="true" style="font-size: 1.5rem">
			</q-knob>
		</q-card-main>
		</q-card>
			</vu:grid>
			</vu:block>
			
			<vu:block title="Temperature sensor" id=temperature>

				
				<div class="col-md-6 col-xs-12" >
					<div class="chart chartjs linechart bg-white" 
							    th:data-url="@{/api/basemanagment/equipment/environment/data/series}" 
							    data-query-measures='["value:MAX"]'
							    data-query-data-filter='{ "measurement": "temperature", "filters": {"equipment": "fs01"}}'
							    data-query-time-filter='{ "from": "now() - 3d", "to": "now()", "dim": "1h"}'
								data-labels='{"value:mean":"Temperature mean values"}' 
							    data-colors='iANDROID:LIGHT'></div> 
							    </div>
			</vu:block>
							    
			<vu:block title="Humidity Sensor" id="humidity">
				<div class="col-md-6 col-xs-12" >
					<div class="chart chartjs linechart bg-white" 
							    th:data-url="@{/api/basemanagment/equipment/environment/data/series}" 
							    data-query-measures='["value:mean"]'
							    data-query-data-filter='{ "measurement": "humidite", "filters": {"equipment": "fs01"}}'
							    data-query-time-filter='{ "from": "now() - 3d", "to": "now()", "dim": "1h"}'
								data-labels='{"value:mean":"Temperature mean values"}' 
							    data-colors='iANDROID'></div> 
				</div>

</vu:block>		
			<vu:block title="Moisture Sensor" id="moisture">
				<div class="col-md-6 col-xs-12" >
					<div class="chart chartjs linechart bg-white" 
							    th:data-url="@{/api/basemanagment/equipment/environment/data/series}" 
							    data-query-measures='["value:mean"]'
							    data-query-data-filter='{ "measurement": "moisture", "filters": {"equipment": "fs01"}}'
							    data-query-time-filter='{ "from": "now() - 3d", "to": "now()", "dim": "1h"}'
								data-labels='{"value:mean":"Moisture mean values"}' 
							    data-colors='iGREEN:INTENSITY'></div> 
				</div>
</vu:block>	 
</div>
		<div class="row gutter-md"  th:case="*">
		<vu:block title="No Sensors on this equipment">
		</vu:block>
		</div>
		</section>

	
	<section layout:fragment="footer" >
		<script type="text/javascript">
			showCharts();
		</script>
	</section>
</html>